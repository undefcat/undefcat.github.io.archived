(this["webpackJsonptae-sik"]=this["webpackJsonptae-sik"]||[]).push([[0],{196:function(e,t,n){},198:function(e,t,n){},199:function(e,t,n){},200:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(73),o=n.n(a),i=(n(85),n(13)),s=n(6),l=(n(86),function(e,t){return new Array(e).fill(0).map((function(){return function(e){return new Array(e).fill(0).map((function(){return{r:255,g:255,b:255,a:0,fill:!1}}))}(t)}))}),u=function(){return{"left-wall":l(8,13),"center-wall":l(8,23),"right-wall":l(8,12)}},b=Object(r.createContext)({walls:u(),trigger:function(){},setWalls:function(){},resetWalls:function(){}}),j=n(3);var d=function(e){var t=e.block,n=t.r,r=t.g,c=t.b,a=t.a,o="rgba(".concat(n,", ").concat(r,", ").concat(c,", ").concat(a,")");return Object(j.jsxs)("div",{className:"block",children:[Object(j.jsx)("div",{className:"block-overlay",style:{backgroundColor:o}}),Object(j.jsx)("div",{className:"block-image"})]})};var f=function(e){var t=e.blocks.map((function(e,t){return Object(j.jsx)(d,{block:e},t)}));return Object(j.jsx)("div",{className:"blocks",children:t})};var v=function(e){var t=e.id,n=e.blocks.map((function(e,t){return Object(j.jsx)(f,{blocks:e},t)}));return Object(j.jsx)("div",{className:"wall-wrapper",id:t,children:n})},O=function(){return Object(r.useContext)(b)};var w=function(){var e=O().walls;return Object(j.jsxs)("div",{id:"wrap",children:[Object(j.jsx)("div",{className:"background",id:"ground"}),Object(j.jsxs)("div",{id:"walls",children:[Object(j.jsx)(v,{id:"center-wall",blocks:e["center-wall"]}),Object(j.jsx)(v,{id:"left-wall",blocks:e["left-wall"]}),Object(j.jsx)(v,{id:"right-wall",blocks:e["right-wall"]})]}),Object(j.jsx)("div",{className:"background",id:"pillars"})]})},p=n(79),x=["#D0021B80","#F5A62380","#F8E71C80","#8B572A80","#7ED32180","#41750580","#BD10E080","#9013FE80","#4A90E280","#50E3C280","#B8E98680","#00000080","#4A4A4A80","#9B9B9B80","#FFFFFF80"];var h=function(e){var t=e.color,n=e.onChange;return Object(j.jsx)("section",{children:Object(j.jsx)(p.a,{color:t,onChange:n,presetColors:x})})};var k=function(e){var t=e.wallId,n=e.blocksId,c=e.id,a=e.color,o=e.trigger,i=a.r,s=a.g,l=a.b,u=a.a,b="rgba(".concat(i,",").concat(s,",").concat(l,",").concat(u,")"),d=Object(r.useCallback)((function(e){1===e.buttons&&o(t,n,c)}),[t,n,c,o]),f=Object(r.useCallback)((function(){o(t,n,c)}),[t,n,c,o]);return Object(j.jsx)("div",{className:"mini-map-block",style:{backgroundColor:b},onMouseEnter:d,onMouseDown:f})};var g=function(e){var t=e.wallId,n=e.blocksId,r=e.blocks,c=O().trigger,a=r.map((function(e,r){return Object(j.jsx)(k,{wallId:t,blocksId:n,id:r,color:e,trigger:c},r)}));return Object(j.jsx)("div",{className:"mini-map-blocks",children:a})};var m=function(e){var t=e.id,n=e.blocks.map((function(e,n){return Object(j.jsx)(g,{wallId:t,blocksId:n,blocks:e},n)}));return Object(j.jsx)("div",{className:"mini-map-walls",children:n})};n(196);var y=function(){var e=O(),t=[];for(var n in e.walls)t.push(Object(j.jsx)(m,{id:n,blocks:e.walls[n]},n));return Object(j.jsx)("section",{children:t})};var C=function(){var e=O().resetWalls;return Object(j.jsx)("button",{onClick:function(){window.confirm("\ud604\uc7ac \ubcbd\uc5d0 \uc801\uc6a9\ub41c \uc0c9\uc0c1\uc744 \ucd08\uae30\ud654 \ud558\uc2dc\uaca0\uc5b4\uc694?")&&e()},children:"\uce60\ud574\uc9c4 \ubcbd \uc0c9\uc0c1 \ucd08\uae30\ud654"})};var E=function(){var e=O().walls,t=Object(r.useRef)();return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("button",{type:"button",onClick:function(){var n=[{title:"noname",date:new Date,walls:e}],r=encodeURIComponent(JSON.stringify(n)),c="data:application/json;charset=utf-8,".concat(r);t.current.setAttribute("href",c),t.current.click()},children:"\uc800\uc7a5"}),Object(j.jsx)("a",{download:"save.json",ref:t,style:{visibility:"hidden"}})]})};var N=function(){var e=O().setWalls;return Object(j.jsx)("input",{accept:"application/json",type:"file",onChange:function(t){var n=t.target.files;if(0!==n.length){var r=n[0],c=new FileReader;c.onload=function(t){var n=t.target.result;try{var r=JSON.parse(n)[0].walls;e(r)}catch(t){alert("\ud30c\uc77c\uc744 \uc77d\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.. \u3160_\u3160 \ud30c\uc77c\uc774 \uae68\uc9c4 \uac83 \uac19\uc2b5\ub2c8\ub2e4.")}},c.readAsText(r)}}})},A=n(4),F=n.n(A),I=n(78),S=n(80);var B=function(){var e=Object(r.useRef)(),t=function(){var t=Object(I.a)(F.a.mark((function t(){var n;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(S.a)(document.querySelector("#wrap"));case 3:n=t.sent,e.current.setAttribute("href",n),e.current.click(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("button",{type:"button",onClick:t,children:"\uc774\ubbf8\uc9c0 \ub2e4\uc6b4\ub85c\ub4dc"}),Object(j.jsx)("a",{download:"image.png",ref:e,style:{visibility:"hidden"}})]})};n(198);var L=function(){return Object(j.jsxs)("section",{id:"buttons",children:[Object(j.jsx)(C,{}),Object(j.jsx)(N,{}),Object(j.jsx)(E,{}),Object(j.jsx)(B,{})]})};n(199);var D=function(e){var t=e.color,n=e.onChangeColor,r=e.visible;return Object(j.jsxs)("div",{className:r?"":"hide",id:"option",children:[Object(j.jsx)(y,{}),Object(j.jsx)(h,{color:t,onChange:n}),Object(j.jsx)(L,{})]})},W=function(e,t){return e.fill?(r=t,(n=e).r===r.r&&n.g===r.g&&n.b===r.b&&n.a===r.a?Object(s.a)(Object(s.a)({},e),{},{a:0,fill:!1}):Object(s.a)(Object(s.a)({},t),{},{fill:!0})):Object(s.a)(Object(s.a)({},t),{},{fill:!0});var n,r};var J=function(){var e=Object(r.useState)(u()),t=Object(i.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(!1),o=Object(i.a)(a,2),l=o[0],d=o[1],f=Object(r.useState)({r:0,g:0,b:0,a:.5}),v=Object(i.a)(f,2),O=v[0],p=v[1],x=Object(r.useState)(0),h=Object(i.a)(x,2),k=h[0],g=h[1],m=function(e,t,r){var a=n[e],o=a[t].map((function(e,t){return t!==r?e:W(e,O)}));a.splice(t,1,o),c(Object(s.a)({},n))};!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"KeyQ";Object(r.useEffect)((function(){var n=function(n){n.code===t&&e((function(e){return!e}))};return window.addEventListener("keydown",n),window.addEventListener("beforeunload",(function(e){e.preventDefault(),e.returnValue=""})),function(){window.removeEventListener("keydown",n)}}),[e,t])}(d,"KeyQ"),function(e){Object(r.useEffect)((function(){var t=function(t){switch(t.key){case"Shift":return void e(1);case"Alt":return void e(2);default:e(0)}},n=function(){e(0)};return window.addEventListener("keydown",t),window.addEventListener("keyup",n),function(){window.removeEventListener("keydown",t),window.removeEventListener("keyup",n)}}),[e])}(g);var y={walls:n,trigger:function(e,t,r){if(!n.hasOwnProperty(e))throw new Error("".concat(e," \uac12\uc774 \uc874\uc7ac\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."));switch(k){case 0:return void m(e,t,r);case 1:return void function(e,t,r){var a=n[e],o=a[t].find((function(e,t){return t===r})),i=W(o,O),l=a[t].map((function(){return Object(s.a)({},i)}));a.splice(t,1,l),c(Object(s.a)({},n))}(e,t,r);case 2:return void function(e,t,r){var a=n[e],o=a[t].find((function(e,t){return t===r})),i=W(o,O),l=a.map((function(e){return e.map((function(e,t){return t!==r?e:Object(s.a)({},i)}))})),u=Object(s.a)({},n);u[e]=l,c(u)}(e,t,r);default:m(e,t,r)}},setWalls:c,resetWalls:function(){c(u())}};return Object(j.jsxs)(b.Provider,{value:y,children:[Object(j.jsx)(w,{color:O}),Object(j.jsx)(D,{color:O,onChangeColor:function(e){p(e.rgb)},visible:l})]})};o.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(J,{})}),document.getElementById("root"))},85:function(e,t,n){},86:function(e,t,n){}},[[200,1,2]]]);
//# sourceMappingURL=main.6d046b6d.chunk.js.map